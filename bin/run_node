#!/usr/bin/env ruby --jit
require "bundler/setup"
require 'gossip'
puts "Ruby version: #{RUBY_VERSION}"

PORT = 4545

puts "Enter seed nodes"
input = gets
hosts = input.split(" ")
abort 'No seed nodes entered' if hosts.nil? || hosts.empty?

puts "Starting node"

node = Gossip::Integration::Udp::Node.new('localhost', hosts, PORT)

# Input thread (stdin)
puts "Ready\n"
begin
  node.start  
rescue Interrupt
end
puts "\nDone"
